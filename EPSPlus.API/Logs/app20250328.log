2025-03-28 09:38:14.543 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 09:38:16.854 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 09:38:18.036 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 09:38:18.292 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 09:38:18.293 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 09:38:18.294 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 09:38:18.372 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 09:38:18.373 +01:00 [INF] Hosting environment: Development
2025-03-28 09:38:18.373 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 09:38:18.500 +01:00 [INF] Server desktop-p6lqc67:25256:5e18abb2 successfully announced in 101.5274 ms
2025-03-28 09:38:18.517 +01:00 [INF] Server desktop-p6lqc67:25256:5e18abb2 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 09:38:18.642 +01:00 [INF] 2 servers were removed due to timeout
2025-03-28 09:38:18.885 +01:00 [INF] Server desktop-p6lqc67:25256:5e18abb2 all the dispatchers started
2025-03-28 09:38:19.550 +01:00 [INF] HTTP GET /index.html responded 200 in 457.3343 ms
2025-03-28 09:38:20.114 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 09:38:20.114 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 09:38:20.115 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 2097.8151ms
2025-03-28 09:38:20.115 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 09:38:20.153 +01:00 [INF] HTTP GET /index.js responded 200 in 11.7171 ms
2025-03-28 09:38:20.155 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 43.5972ms
2025-03-28 09:38:20.221 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 43.3891ms
2025-03-28 09:38:21.012 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 901.2075ms
2025-03-28 09:38:21.148 +01:00 [INF] Running contribution validation job...
2025-03-28 09:38:21.151 +01:00 [INF] Retrying failed contributions...
2025-03-28 09:38:21.152 +01:00 [INF] Retrying failed contributions...
2025-03-28 09:38:21.153 +01:00 [INF] Fetching all contributions
2025-03-28 09:38:21.177 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 09:38:21.239 +01:00 [INF] Fetching all failed contributions
2025-03-28 09:38:21.239 +01:00 [INF] Fetching all failed contributions
2025-03-28 09:38:21.243 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/favicon-32x32.png - null null
2025-03-28 09:38:21.279 +01:00 [INF] The file /favicon-32x32.png was not modified
2025-03-28 09:38:21.352 +01:00 [INF] HTTP GET /favicon-32x32.png responded 304 in 107.5297 ms
2025-03-28 09:38:21.355 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/favicon-32x32.png - 304 null image/png 111.5324ms
2025-03-28 09:38:21.741 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 560.8029 ms
2025-03-28 09:38:21.742 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 564.7737ms
2025-03-28 09:38:25.158 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[Status] = 3
2025-03-28 09:38:25.158 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
2025-03-28 09:38:25.158 +01:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[Status] = 3
2025-03-28 09:38:25.212 +01:00 [INF] Fetched 0 failed contributions
2025-03-28 09:38:25.212 +01:00 [INF] Fetched 0 failed contributions
2025-03-28 09:38:25.213 +01:00 [INF] Retry job for failed contributions completed.
2025-03-28 09:38:25.213 +01:00 [INF] Retry job for failed contributions completed.
2025-03-28 09:38:25.367 +01:00 [INF] Fetched 15 contributions
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: 35ab6726-e70f-44d3-bf40-0444b8ac99f4, Amount: 10000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: cf2e84a8-80dc-460f-a060-0e2b7e153cfc, Amount: 9000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: ebd50c16-5e42-4bda-9981-2358338fa5aa, Amount: 100000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: 775e34d3-6fbc-4ac1-99ba-2f1f84ea5288, Amount: 10000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: 74ca6d42-b133-430e-b002-379ce6e28205, Amount: 100000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: 2cab60d0-4b2d-442e-894f-41446bf4ded8, Amount: 90000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: 97e5b3ca-76a4-425b-b2d0-46c41db448eb, Amount: 100000.00
2025-03-28 09:38:25.373 +01:00 [INF] Valid contribution found! ID: b2a87db0-2f41-4187-b262-4f55d1daa3d0, Amount: 890.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: 8a6933cb-788f-4e20-97ba-5b67aed40b19, Amount: 1000.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: ccf2e08f-5653-437f-a102-9006949e1239, Amount: 100000.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: 8904ef5f-39fb-4933-9b5d-bcea1a21e1f8, Amount: 900.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: 4afb2fee-efef-49ad-bbd0-c8782485e3fa, Amount: 10100.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: ca0771fd-411a-4458-8873-e653dfed898e, Amount: 1090.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: dc175b70-aa2d-44cb-83d4-e8536356ecb3, Amount: 100000.00
2025-03-28 09:38:25.374 +01:00 [INF] Valid contribution found! ID: 53dee707-1b9f-4259-8fab-eedaf11a2f37, Amount: 900.00
2025-03-28 09:38:25.375 +01:00 [INF] Contribution validation job completed.
2025-03-28 10:00:12.022 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 10:00:15.749 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 10:00:17.773 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 10:00:17.946 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 10:00:17.947 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 10:00:17.948 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 10:00:18.133 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 10:00:18.134 +01:00 [INF] Hosting environment: Development
2025-03-28 10:00:18.134 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 10:00:18.240 +01:00 [INF] Server desktop-p6lqc67:39536:e75ab60c successfully announced in 86.8579 ms
2025-03-28 10:00:18.261 +01:00 [INF] Server desktop-p6lqc67:39536:e75ab60c is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 10:00:19.010 +01:00 [INF] Server desktop-p6lqc67:39536:e75ab60c all the dispatchers started
2025-03-28 10:00:19.517 +01:00 [INF] HTTP GET /index.html responded 200 in 500.4198 ms
2025-03-28 10:00:19.594 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 1850.4722ms
2025-03-28 10:00:19.811 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 10:00:19.811 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 10:00:19.811 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 10:00:19.877 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 23.4087ms
2025-03-28 10:00:19.946 +01:00 [INF] HTTP GET /index.js responded 200 in 133.0545 ms
2025-03-28 10:00:19.948 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 139.7981ms
2025-03-28 10:00:20.157 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 348.4601ms
2025-03-28 10:00:20.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 10:00:21.019 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 566.8064 ms
2025-03-28 10:00:21.020 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 627.2546ms
2025-03-28 10:00:21.877 +01:00 [INF] Retrying failed contributions...
2025-03-28 10:00:21.924 +01:00 [INF] Fetching all failed contributions
2025-03-28 10:00:28.175 +01:00 [INF] Executed DbCommand (145ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[Status] = 3
2025-03-28 10:00:28.288 +01:00 [INF] Fetched 0 failed contributions
2025-03-28 10:00:28.289 +01:00 [INF] Retry job for failed contributions completed.
2025-03-28 10:05:19.009 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 10:27:30.292 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Member - application/json 308
2025-03-28 10:27:30.442 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:27:30.506 +01:00 [INF] Route matched with {action = "CreateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] CreateMember(EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:27:30.614 +01:00 [INF] Creating new member: Tolu Shola
2025-03-28 10:27:31.015 +01:00 [ERR] Error creating member.
System.InvalidOperationException: Member must be between 18 and 70 years old.
   at EPSPlus.Application.Services.MemberService.CreateMemberAsync(Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\MemberService.cs:line 57
2025-03-28 10:27:31.233 +01:00 [ERR] Error creating member: Tolu Shola
System.InvalidOperationException: Member must be between 18 and 70 years old.
   at EPSPlus.Application.Services.MemberService.CreateMemberAsync(Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\MemberService.cs:line 57
   at EPSPlus.API.Controllers.MemberController.CreateMember(Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API\Controllers\MemberController.cs:line 52
2025-03-28 10:27:31.254 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 10:27:31.277 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API) in 762.9523ms
2025-03-28 10:27:31.277 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:27:31.278 +01:00 [INF] HTTP POST /api/Member responded 400 in 980.0115 ms
2025-03-28 10:27:31.279 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Member - 400 null text/plain; charset=utf-8 992.6332ms
2025-03-28 10:27:47.235 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Member - application/json 308
2025-03-28 10:27:47.244 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:27:47.245 +01:00 [INF] Route matched with {action = "CreateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] CreateMember(EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:27:47.259 +01:00 [INF] Creating new member: Tolu Shola
2025-03-28 10:27:47.282 +01:00 [INF] Adding new member: Tolu Shola
2025-03-28 10:27:47.497 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__member_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__member_Id_0
2025-03-28 10:27:48.333 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Members] ([Id], [CreatedAt], [DateOfBirth], [Email], [FirstName], [IsActive], [LastName], [PhoneNumber], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-03-28 10:27:48.387 +01:00 [INF] Successfully added member: Tolu Shola
2025-03-28 10:27:48.388 +01:00 [INF] Member Tolu Shola created successfully
2025-03-28 10:27:48.404 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'EPSPlus.Domain.Entities.Member'.
2025-03-28 10:27:48.507 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API) in 1261.1547ms
2025-03-28 10:27:48.509 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:27:48.514 +01:00 [INF] HTTP POST /api/Member responded 201 in 1277.2639 ms
2025-03-28 10:27:48.518 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Member - 201 null application/json; charset=utf-8 1283.5713ms
2025-03-28 10:28:55.330 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Member - null null
2025-03-28 10:28:55.338 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.GetAllMembers (EPSPlus.API)'
2025-03-28 10:28:55.346 +01:00 [INF] Route matched with {action = "GetAllMembers", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[EPSPlus.Domain.Entities.Member]]] GetAllMembers() on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:28:55.352 +01:00 [INF] Fetching all active members
2025-03-28 10:28:55.354 +01:00 [INF] Fetching all active members.
2025-03-28 10:28:55.356 +01:00 [INF] Retrieving all active members from database.
2025-03-28 10:28:55.494 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[IsActive] = CAST(1 AS bit)
2025-03-28 10:28:55.516 +01:00 [INF] Active members cached for subsequent requests.
2025-03-28 10:28:55.517 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[EPSPlus.Domain.Entities.Member, EPSPlus.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-28 10:28:55.523 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.GetAllMembers (EPSPlus.API) in 176.589ms
2025-03-28 10:28:55.523 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.GetAllMembers (EPSPlus.API)'
2025-03-28 10:28:55.523 +01:00 [INF] HTTP GET /api/Member responded 200 in 192.6077 ms
2025-03-28 10:28:55.524 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Member - 200 null application/json; charset=utf-8 193.9964ms
2025-03-28 10:29:58.084 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44335/api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 - application/json 311
2025-03-28 10:29:58.090 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API)'
2025-03-28 10:29:58.101 +01:00 [INF] Route matched with {action = "UpdateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMember(System.Guid, EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:29:58.110 +01:00 [WRN] Mismatch between request ID and member ID
2025-03-28 10:29:58.113 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-03-28 10:29:58.149 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API) in 47.9949ms
2025-03-28 10:29:58.149 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API)'
2025-03-28 10:29:58.150 +01:00 [INF] HTTP PUT /api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 responded 400 in 64.8310 ms
2025-03-28 10:29:58.150 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44335/api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 - 400 null application/problem+json; charset=utf-8 65.8796ms
2025-03-28 10:30:25.246 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44335/api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 - application/json 311
2025-03-28 10:30:25.248 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API)'
2025-03-28 10:30:25.248 +01:00 [INF] Route matched with {action = "UpdateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMember(System.Guid, EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:30:25.256 +01:00 [INF] Updating member Temidayo Akin with ID: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:30:25.393 +01:00 [INF] Executed DbCommand (109ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 50), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [CreatedAt] = @p0, [DateOfBirth] = @p1, [Email] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastName] = @p5, [PhoneNumber] = @p6, [UpdatedAt] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-03-28 10:30:25.401 +01:00 [INF] Member Temidayo Akin with ID "3fa85f64-5717-4562-b3fc-2c963f66afb7" updated successfully
2025-03-28 10:30:25.401 +01:00 [INF] Updated member with ID "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:30:25.408 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-28 10:30:25.408 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API) in 160.2881ms
2025-03-28 10:30:25.409 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API)'
2025-03-28 10:30:25.409 +01:00 [INF] HTTP PUT /api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 responded 204 in 162.0864 ms
2025-03-28 10:30:25.411 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44335/api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 - 204 null null 164.7427ms
2025-03-28 10:30:53.861 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 - null null
2025-03-28 10:30:53.872 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.GetMemberById (EPSPlus.API)'
2025-03-28 10:30:53.881 +01:00 [INF] Route matched with {action = "GetMemberById", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] GetMemberById(System.Guid) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:30:53.883 +01:00 [INF] Fetching member with ID "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:30:53.885 +01:00 [INF] Fetching member with ID "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:30:53.887 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-b3fc-2c963f66afb7" from database
2025-03-28 10:30:53.907 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 10:30:53.908 +01:00 [INF] Member "3fa85f64-5717-4562-b3fc-2c963f66afb7" cached for subsequent requests.
2025-03-28 10:30:53.909 +01:00 [INF] Executing OkObjectResult, writing value of type 'EPSPlus.Domain.Entities.Member'.
2025-03-28 10:30:53.910 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.GetMemberById (EPSPlus.API) in 28.9369ms
2025-03-28 10:30:53.910 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.GetMemberById (EPSPlus.API)'
2025-03-28 10:30:53.910 +01:00 [INF] HTTP GET /api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 responded 200 in 48.5772 ms
2025-03-28 10:30:53.911 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Member/3fa85f64-5717-4562-b3fc-2c963f66afb7 - 200 null application/json; charset=utf-8 50.896ms
2025-03-28 10:31:58.966 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 152
2025-03-28 10:31:58.967 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 10:31:58.977 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 10:31:59.036 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 10:31:59.041 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:31:59.100 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 10:31:59.233 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 10:31:59.235 +01:00 [INF] Successfully added contribution with Id: "baefd8f4-4922-4414-91c2-90121535b3a0" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:31:59.235 +01:00 [INF] Contribution added successfully: "baefd8f4-4922-4414-91c2-90121535b3a0"
2025-03-28 10:31:59.238 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afb7" with Amount: 9000 and Type: "Monthly"
2025-03-28 10:31:59.244 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afb7" from cache.
2025-03-28 10:31:59.249 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:31:59.250 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:31:59.268 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 10:31:59.270 +01:00 [INF] Fetched 1 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:32:00.831 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afb7" with Amount: 9000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 267
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 10:32:00.839 +01:00 [INF] Updating status of contribution with Id: "baefd8f4-4922-4414-91c2-90121535b3a0" to Status: "Failed"
2025-03-28 10:32:00.870 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 10:32:00.871 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 10:32:00.872 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 10:32:00.874 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 10:32:00.875 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 1897.7962ms
2025-03-28 10:32:00.875 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 10:32:00.875 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 1908.4085 ms
2025-03-28 10:32:00.876 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 1909.6302ms
2025-03-28 10:33:02.644 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 152
2025-03-28 10:33:02.645 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 10:33:02.645 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 10:33:02.649 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 10:33:02.649 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:33:02.675 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 10:33:02.680 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 10:33:02.681 +01:00 [INF] Successfully added contribution with Id: "f4250d79-4a30-49ac-b83b-44b6d1c0863e" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:33:02.681 +01:00 [INF] Contribution added successfully: "f4250d79-4a30-49ac-b83b-44b6d1c0863e"
2025-03-28 10:33:02.681 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afb7" with Amount: 9000 and Type: "Monthly"
2025-03-28 10:33:02.681 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afb7" from cache.
2025-03-28 10:33:02.681 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:33:02.681 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afb7"
2025-03-28 10:33:02.909 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afb7" with Amount: 9000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 267
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 10:33:02.910 +01:00 [INF] Updating status of contribution with Id: "f4250d79-4a30-49ac-b83b-44b6d1c0863e" to Status: "Failed"
2025-03-28 10:33:02.916 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 10:33:02.917 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 10:33:02.917 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 10:33:02.917 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 10:33:02.918 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 272.8462ms
2025-03-28 10:33:02.918 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 10:33:02.918 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 273.5727 ms
2025-03-28 10:33:02.919 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 275.2423ms
2025-03-28 10:47:26.848 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Member - application/json 308
2025-03-28 10:47:26.849 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:47:26.849 +01:00 [INF] Route matched with {action = "CreateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] CreateMember(EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:47:26.879 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-28 10:47:26.896 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API) in 46.734ms
2025-03-28 10:47:26.896 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:47:26.896 +01:00 [INF] HTTP POST /api/Member responded 400 in 47.8013 ms
2025-03-28 10:47:26.897 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Member - 400 null application/problem+json; charset=utf-8 49.3049ms
2025-03-28 10:55:59.169 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 10:56:01.264 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 10:56:02.641 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 10:56:02.838 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 10:56:02.839 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 10:56:02.839 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 10:56:02.913 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 10:56:02.913 +01:00 [INF] Hosting environment: Development
2025-03-28 10:56:02.914 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 10:56:02.937 +01:00 [INF] Server desktop-p6lqc67:35000:7e09ad19 successfully announced in 24.4157 ms
2025-03-28 10:56:02.943 +01:00 [INF] Server desktop-p6lqc67:35000:7e09ad19 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 10:56:03.039 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 10:56:03.217 +01:00 [INF] Server desktop-p6lqc67:35000:7e09ad19 all the dispatchers started
2025-03-28 10:56:03.448 +01:00 [INF] HTTP GET /index.html responded 200 in 526.7774 ms
2025-03-28 10:56:03.486 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 843.1317ms
2025-03-28 10:56:03.617 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 10:56:03.617 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 10:56:03.630 +01:00 [INF] HTTP GET /index.js responded 200 in 12.1450 ms
2025-03-28 10:56:03.632 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 15.7377ms
2025-03-28 10:56:03.643 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 10:56:03.645 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 28.3381ms
2025-03-28 10:56:03.690 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.0871ms
2025-03-28 10:56:03.836 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 10:56:04.076 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 228.9435 ms
2025-03-28 10:56:04.076 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 239.8852ms
2025-03-28 10:57:44.090 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Member - application/json 308
2025-03-28 10:57:44.175 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:57:44.222 +01:00 [INF] Route matched with {action = "CreateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] CreateMember(EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:57:44.702 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-28 10:57:44.808 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API) in 577.9354ms
2025-03-28 10:57:44.808 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:57:44.809 +01:00 [INF] HTTP POST /api/Member responded 400 in 717.5389 ms
2025-03-28 10:57:44.811 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Member - 400 null application/problem+json; charset=utf-8 722.8363ms
2025-03-28 10:58:03.415 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Member - application/json 308
2025-03-28 10:58:03.418 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:58:03.419 +01:00 [INF] Route matched with {action = "CreateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] CreateMember(EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:58:03.453 +01:00 [INF] Creating new member: Stephen Eze
2025-03-28 10:58:03.664 +01:00 [ERR] Error creating member.
System.InvalidOperationException: Member must be between 18 and 70 years old.
   at EPSPlus.Application.Services.MemberService.CreateMemberAsync(Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\MemberService.cs:line 57
2025-03-28 10:58:03.823 +01:00 [ERR] Error creating member: Stephen Eze
System.InvalidOperationException: Member must be between 18 and 70 years old.
   at EPSPlus.Application.Services.MemberService.CreateMemberAsync(Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\MemberService.cs:line 57
   at EPSPlus.API.Controllers.MemberController.CreateMember(Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API\Controllers\MemberController.cs:line 52
2025-03-28 10:58:03.827 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 10:58:03.829 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API) in 409.3706ms
2025-03-28 10:58:03.829 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:58:03.829 +01:00 [INF] HTTP POST /api/Member responded 400 in 414.0215 ms
2025-03-28 10:58:03.830 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Member - 400 null text/plain; charset=utf-8 415.6099ms
2025-03-28 10:58:28.368 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Member - application/json 308
2025-03-28 10:58:28.369 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:58:28.369 +01:00 [INF] Route matched with {action = "CreateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] CreateMember(EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:58:28.380 +01:00 [INF] Creating new member: Stephen Eze
2025-03-28 10:58:28.387 +01:00 [INF] Adding new member: Stephen Eze
2025-03-28 10:58:30.653 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__member_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__member_Id_0
2025-03-28 10:58:31.046 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Members] ([Id], [CreatedAt], [DateOfBirth], [Email], [FirstName], [IsActive], [LastName], [PhoneNumber], [UpdatedAt])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-03-28 10:58:31.071 +01:00 [INF] Successfully added member: Stephen Eze
2025-03-28 10:58:31.073 +01:00 [INF] Member Stephen Eze created successfully
2025-03-28 10:58:31.079 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'EPSPlus.Domain.Entities.Member'.
2025-03-28 10:58:31.130 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API) in 2760.3155ms
2025-03-28 10:58:31.131 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.CreateMember (EPSPlus.API)'
2025-03-28 10:58:31.132 +01:00 [INF] HTTP POST /api/Member responded 201 in 2763.2599 ms
2025-03-28 10:58:31.143 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Member - 201 null application/json; charset=utf-8 2775.4317ms
2025-03-28 10:58:48.284 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Member/3fa85f64-5717-4562-0987-2c963f66afa6 - null null
2025-03-28 10:58:48.286 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.GetMemberById (EPSPlus.API)'
2025-03-28 10:58:48.298 +01:00 [INF] Route matched with {action = "GetMemberById", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[EPSPlus.Domain.Entities.Member]] GetMemberById(System.Guid) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:58:48.307 +01:00 [INF] Fetching member with ID "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 10:58:48.311 +01:00 [INF] Fetching member with ID "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 10:58:48.316 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from database
2025-03-28 10:58:48.363 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 10:58:48.371 +01:00 [INF] Member "3fa85f64-5717-4562-0987-2c963f66afa6" cached for subsequent requests.
2025-03-28 10:58:48.372 +01:00 [INF] Executing OkObjectResult, writing value of type 'EPSPlus.Domain.Entities.Member'.
2025-03-28 10:58:48.373 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.GetMemberById (EPSPlus.API) in 74.5806ms
2025-03-28 10:58:48.373 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.GetMemberById (EPSPlus.API)'
2025-03-28 10:58:48.374 +01:00 [INF] HTTP GET /api/Member/3fa85f64-5717-4562-0987-2c963f66afa6 responded 200 in 89.3716 ms
2025-03-28 10:58:48.374 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Member/3fa85f64-5717-4562-0987-2c963f66afa6 - 200 null application/json; charset=utf-8 90.9895ms
2025-03-28 10:59:27.712 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:44335/api/Member/3fa85f64-5717-4562-0987-2c963f66afa6 - application/json 316
2025-03-28 10:59:27.713 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API)'
2025-03-28 10:59:27.722 +01:00 [INF] Route matched with {action = "UpdateMember", controller = "Member"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateMember(System.Guid, EPSPlus.Domain.Entities.Member) on controller EPSPlus.API.Controllers.MemberController (EPSPlus.API).
2025-03-28 10:59:27.731 +01:00 [INF] Updating member Stephen Ezeamama with ID: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 10:59:27.859 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 50), @p4='?' (DbType = Boolean), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Members] SET [CreatedAt] = @p0, [DateOfBirth] = @p1, [Email] = @p2, [FirstName] = @p3, [IsActive] = @p4, [LastName] = @p5, [PhoneNumber] = @p6, [UpdatedAt] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-03-28 10:59:27.862 +01:00 [INF] Member Stephen Ezeamama with ID "3fa85f64-5717-4562-0987-2c963f66afa6" updated successfully
2025-03-28 10:59:27.863 +01:00 [INF] Updated member with ID "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 10:59:27.867 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-28 10:59:27.868 +01:00 [INF] Executed action EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API) in 145.0307ms
2025-03-28 10:59:27.868 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.MemberController.UpdateMember (EPSPlus.API)'
2025-03-28 10:59:27.868 +01:00 [INF] HTTP PUT /api/Member/3fa85f64-5717-4562-0987-2c963f66afa6 responded 204 in 155.5489 ms
2025-03-28 10:59:27.870 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:44335/api/Member/3fa85f64-5717-4562-0987-2c963f66afa6 - 204 null null 157.7945ms
2025-03-28 11:00:04.580 +01:00 [INF] Retrying failed contributions...
2025-03-28 11:00:04.582 +01:00 [INF] Fetching all failed contributions
2025-03-28 11:00:04.625 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[Status] = 3
2025-03-28 11:00:04.627 +01:00 [INF] Fetched 0 failed contributions
2025-03-28 11:00:04.628 +01:00 [INF] Retry job for failed contributions completed.
2025-03-28 11:00:42.767 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 152
2025-03-28 11:00:42.768 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:00:42.778 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:00:42.842 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:00:42.845 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:42.910 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:00:43.025 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:00:43.028 +01:00 [INF] Successfully added contribution with Id: "df7c1485-7e17-48f4-8115-b91c91d8f5ff" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:43.028 +01:00 [INF] Contribution added successfully: "df7c1485-7e17-48f4-8115-b91c91d8f5ff"
2025-03-28 11:00:43.031 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 9000 and Type: "Voluntary"
2025-03-28 11:00:43.034 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from database
2025-03-28 11:00:43.043 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 11:00:43.061 +01:00 [INF] Member "3fa85f64-5717-4562-0987-2c963f66afa6" cached for subsequent requests.
2025-03-28 11:00:43.485 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 9000
System.ArgumentException: Voluntary contribution cannot exceed 1000.
   at EPSPlus.Application.Services.ContributionService.HandleVoluntaryContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 283
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 161
2025-03-28 11:00:43.491 +01:00 [INF] Updating status of contribution with Id: "df7c1485-7e17-48f4-8115-b91c91d8f5ff" to Status: "Failed"
2025-03-28 11:00:43.514 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:00:43.515 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:00:43.515 +01:00 [WRN] Contribution processing failed: Voluntary contribution cannot exceed 1000.
2025-03-28 11:00:43.517 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:00:43.518 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 739.4154ms
2025-03-28 11:00:43.518 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:00:43.518 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 750.5660 ms
2025-03-28 11:00:43.519 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 751.8339ms
2025-03-28 11:00:56.860 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 152
2025-03-28 11:00:56.861 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:00:56.861 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:00:56.866 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:00:56.866 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:56.870 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:00:56.877 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:00:56.878 +01:00 [INF] Successfully added contribution with Id: "bafb6b46-abed-4aaf-a67f-89f98efae4bf" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:56.880 +01:00 [INF] Contribution added successfully: "bafb6b46-abed-4aaf-a67f-89f98efae4bf"
2025-03-28 11:00:56.881 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 9000 and Type: "Monthly"
2025-03-28 11:00:56.881 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-0987-2c963f66afa6" from cache.
2025-03-28 11:00:56.888 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:56.889 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:56.910 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:00:56.917 +01:00 [INF] Fetched 2 contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:00:57.126 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 9000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 267
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:00:57.127 +01:00 [INF] Updating status of contribution with Id: "bafb6b46-abed-4aaf-a67f-89f98efae4bf" to Status: "Failed"
2025-03-28 11:00:57.134 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:00:57.134 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:00:57.134 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:00:57.134 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:00:57.135 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 273.9332ms
2025-03-28 11:00:57.135 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:00:57.135 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 274.6342 ms
2025-03-28 11:00:57.136 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 276.2196ms
2025-03-28 11:11:25.861 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 11:11:26.986 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 11:11:27.809 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 11:11:27.940 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 11:11:27.940 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 11:11:27.941 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 11:11:27.993 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 11:11:27.994 +01:00 [INF] Hosting environment: Development
2025-03-28 11:11:27.994 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 11:11:28.033 +01:00 [INF] Server desktop-p6lqc67:37288:1a2b8b1a successfully announced in 28.6052 ms
2025-03-28 11:11:28.044 +01:00 [INF] Server desktop-p6lqc67:37288:1a2b8b1a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 11:11:28.418 +01:00 [INF] Server desktop-p6lqc67:37288:1a2b8b1a all the dispatchers started
2025-03-28 11:11:28.593 +01:00 [INF] HTTP GET /index.html responded 200 in 545.0240 ms
2025-03-28 11:11:28.607 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 815.3853ms
2025-03-28 11:11:28.714 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 11:11:28.714 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 11:11:28.714 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 11:11:28.766 +01:00 [INF] HTTP GET /index.js responded 200 in 50.3699 ms
2025-03-28 11:11:28.810 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 95.8401ms
2025-03-28 11:11:28.819 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 97.8338ms
2025-03-28 11:11:28.901 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 187.1604ms
2025-03-28 11:11:28.969 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 11:11:29.251 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 280.4584 ms
2025-03-28 11:11:29.252 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 283.7991ms
2025-03-28 11:11:59.022 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:11:59.082 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:11:59.139 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:11:59.551 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:11:59.555 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:01.345 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:12:01.729 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:12:01.747 +01:00 [INF] Successfully added contribution with Id: "8f4bdc9d-7a4e-48b6-ad75-fcb609b14d4f" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:01.749 +01:00 [INF] Contribution added successfully: "8f4bdc9d-7a4e-48b6-ad75-fcb609b14d4f"
2025-03-28 11:12:01.753 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 10000 and Type: "Monthly"
2025-03-28 11:12:01.758 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from database
2025-03-28 11:12:01.845 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 11:12:01.913 +01:00 [INF] Member "3fa85f64-5717-4562-0987-2c963f66afa6" cached for subsequent requests.
2025-03-28 11:12:01.920 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:01.920 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:01.950 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:12:01.955 +01:00 [INF] Fetched 3 contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:02.391 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 10000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 267
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:12:02.412 +01:00 [INF] Updating status of contribution with Id: "8f4bdc9d-7a4e-48b6-ad75-fcb609b14d4f" to Status: "Failed"
2025-03-28 11:12:02.465 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:12:02.472 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:12:02.473 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:12:02.492 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:12:02.503 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 3355.4897ms
2025-03-28 11:12:02.504 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:12:02.507 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 3483.2326 ms
2025-03-28 11:12:02.519 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 3496.754ms
2025-03-28 11:12:55.249 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:12:55.252 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:12:55.253 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:12:55.259 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:12:55.259 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:55.353 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:12:55.363 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:12:55.364 +01:00 [INF] Successfully added contribution with Id: "04e89d36-ba57-44f1-9683-d3cadd71e1b6" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:55.364 +01:00 [INF] Contribution added successfully: "04e89d36-ba57-44f1-9683-d3cadd71e1b6"
2025-03-28 11:12:55.364 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 10000 and Type: "Monthly"
2025-03-28 11:12:55.365 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-0987-2c963f66afa6" from cache.
2025-03-28 11:12:59.943 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:12:59.944 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:18:20.755 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 11:18:21.654 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 11:18:22.293 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 11:18:22.425 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 11:18:22.425 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 11:18:22.426 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 11:18:22.514 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 11:18:22.515 +01:00 [INF] Hosting environment: Development
2025-03-28 11:18:22.515 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 11:18:22.541 +01:00 [INF] Server desktop-p6lqc67:35188:acefb4ef successfully announced in 17.8322 ms
2025-03-28 11:18:22.551 +01:00 [INF] Server desktop-p6lqc67:35188:acefb4ef is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 11:18:22.663 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 11:18:22.805 +01:00 [INF] Server desktop-p6lqc67:35188:acefb4ef all the dispatchers started
2025-03-28 11:18:23.006 +01:00 [INF] HTTP GET /index.html responded 200 in 452.2148 ms
2025-03-28 11:18:23.018 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 733.0957ms
2025-03-28 11:18:23.128 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 11:18:23.128 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 11:18:23.128 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 11:18:23.150 +01:00 [INF] HTTP GET /index.js responded 200 in 21.1594 ms
2025-03-28 11:18:23.151 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 24.933ms
2025-03-28 11:18:23.153 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 26.61ms
2025-03-28 11:18:23.190 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.576ms
2025-03-28 11:18:23.252 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 11:18:23.392 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 138.6079 ms
2025-03-28 11:18:23.392 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.2459ms
2025-03-28 11:21:03.977 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:21:04.072 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:21:04.119 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:21:04.562 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:21:04.566 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:21:06.665 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:21:07.118 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:21:07.142 +01:00 [INF] Successfully added contribution with Id: "c572fc84-1625-439e-bddd-9c1e86496146" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:21:07.144 +01:00 [INF] Contribution added successfully: "c572fc84-1625-439e-bddd-9c1e86496146"
2025-03-28 11:21:07.147 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 29900 and Type: "Monthly"
2025-03-28 11:21:07.153 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from database
2025-03-28 11:21:07.259 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 11:21:07.355 +01:00 [INF] Member "3fa85f64-5717-4562-0987-2c963f66afa6" cached for subsequent requests.
2025-03-28 11:21:12.963 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:21:12.963 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:21:12.985 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:21:13.031 +01:00 [INF] Fetched 5 contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:21:30.667 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 29900
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 267
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:21:30.679 +01:00 [INF] Updating status of contribution with Id: "c572fc84-1625-439e-bddd-9c1e86496146" to Status: "Failed"
2025-03-28 11:21:30.716 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:21:30.720 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:21:30.721 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:21:30.730 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:21:30.737 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 26611.9674ms
2025-03-28 11:21:30.738 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:21:30.739 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 26760.4950 ms
2025-03-28 11:21:30.746 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 26769.2965ms
2025-03-28 11:23:22.734 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 11:30:04.457 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 11:30:05.514 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 11:30:06.296 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 11:30:06.361 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 11:30:06.362 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 11:30:06.362 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 11:30:06.445 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 11:30:06.446 +01:00 [INF] Hosting environment: Development
2025-03-28 11:30:06.446 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 11:30:06.487 +01:00 [INF] Server desktop-p6lqc67:22952:ee156589 successfully announced in 30.379 ms
2025-03-28 11:30:06.498 +01:00 [INF] Server desktop-p6lqc67:22952:ee156589 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 11:30:06.760 +01:00 [INF] Server desktop-p6lqc67:22952:ee156589 all the dispatchers started
2025-03-28 11:30:06.956 +01:00 [INF] HTTP GET /index.html responded 200 in 147.4961 ms
2025-03-28 11:30:06.979 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 692.8256ms
2025-03-28 11:30:07.034 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 11:30:07.034 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 11:30:07.036 +01:00 [INF] HTTP GET /index.js responded 200 in 1.6653 ms
2025-03-28 11:30:07.086 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 53.0813ms
2025-03-28 11:30:07.086 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 11:30:07.099 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 66.0757ms
2025-03-28 11:30:07.196 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.9758ms
2025-03-28 11:30:07.223 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 11:30:07.467 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 242.3398 ms
2025-03-28 11:30:07.467 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 244.8796ms
2025-03-28 11:31:27.438 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:31:27.497 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:31:27.545 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:31:27.999 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:31:28.004 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:29.954 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:31:30.360 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:31:30.382 +01:00 [INF] Successfully added contribution with Id: "2ff1b6fa-8c26-4971-9021-e3eb8dd678c9" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:30.383 +01:00 [INF] Contribution added successfully: "2ff1b6fa-8c26-4971-9021-e3eb8dd678c9"
2025-03-28 11:31:30.387 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 90000 and Type: "Monthly"
2025-03-28 11:31:30.393 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from database
2025-03-28 11:31:30.487 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 11:31:30.553 +01:00 [INF] Member "3fa85f64-5717-4562-0987-2c963f66afa6" cached for subsequent requests.
2025-03-28 11:31:30.560 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:30.561 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:30.591 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:31:30.599 +01:00 [INF] Fetched 6 contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:31.150 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 90000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 216
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:31:31.174 +01:00 [INF] Updating status of contribution with Id: "2ff1b6fa-8c26-4971-9021-e3eb8dd678c9" to Status: "Failed"
2025-03-28 11:31:31.233 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:31:31.238 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:31:31.239 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:31:31.258 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:31:31.273 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 3717.9666ms
2025-03-28 11:31:31.275 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:31:31.279 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 3839.5863 ms
2025-03-28 11:31:31.293 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 3854.7147ms
2025-03-28 11:31:51.664 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:31:51.667 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:31:51.667 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:31:51.672 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:31:51.672 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:51.717 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:31:51.726 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:31:51.726 +01:00 [INF] Successfully added contribution with Id: "396e3801-b069-4101-8a1e-6c7810a993d6" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:51.726 +01:00 [INF] Contribution added successfully: "396e3801-b069-4101-8a1e-6c7810a993d6"
2025-03-28 11:31:51.727 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 90000 and Type: "Monthly"
2025-03-28 11:31:51.727 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-0987-2c963f66afa6" from cache.
2025-03-28 11:31:55.274 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:31:55.274 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 11:33:53.741 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 90000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 216
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:33:53.744 +01:00 [INF] Updating status of contribution with Id: "396e3801-b069-4101-8a1e-6c7810a993d6" to Status: "Failed"
2025-03-28 11:33:53.759 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:33:53.760 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:33:53.760 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:33:53.761 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:33:53.762 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 122089.1736ms
2025-03-28 11:33:53.762 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:33:53.762 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 122092.5264 ms
2025-03-28 11:33:53.763 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 122094.0254ms
2025-03-28 11:35:06.657 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 11:40:44.089 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 11:40:45.199 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 11:40:46.200 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 11:40:46.348 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 11:40:46.349 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 11:40:46.350 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 11:40:46.399 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 11:40:46.399 +01:00 [INF] Hosting environment: Development
2025-03-28 11:40:46.399 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 11:40:46.449 +01:00 [INF] Server desktop-p6lqc67:28396:cbc3d270 successfully announced in 32.3914 ms
2025-03-28 11:40:46.461 +01:00 [INF] Server desktop-p6lqc67:28396:cbc3d270 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 11:40:46.736 +01:00 [INF] Server desktop-p6lqc67:28396:cbc3d270 all the dispatchers started
2025-03-28 11:40:46.999 +01:00 [INF] HTTP GET /index.html responded 200 in 503.7297 ms
2025-03-28 11:40:47.022 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 839.6099ms
2025-03-28 11:40:47.128 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 11:40:47.128 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 11:40:47.147 +01:00 [INF] HTTP GET /index.js responded 200 in 17.9565 ms
2025-03-28 11:40:47.150 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 22.4097ms
2025-03-28 11:40:47.152 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 11:40:47.154 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 27.2203ms
2025-03-28 11:40:47.266 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.1589ms
2025-03-28 11:40:47.359 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 11:40:47.807 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 444.2732 ms
2025-03-28 11:40:47.807 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 448.0533ms
2025-03-28 11:41:15.005 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:41:15.143 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:41:15.200 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:41:18.834 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:41:23.901 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000 and Type: "Monthly"
2025-03-28 11:41:23.906 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from database
2025-03-28 11:41:25.485 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 11:41:25.650 +01:00 [INF] Member "3fa85f64-5717-4562-b3fc-2c963f66afa6" cached for subsequent requests.
2025-03-28 11:41:40.744 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:41:40.744 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:41:40.773 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:41:40.775 +01:00 [INF] Fetched 0 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:41:41.280 +01:00 [INF] Contribution processed successfully for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000
2025-03-28 11:41:41.280 +01:00 [INF] Invalidating cache for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:41:46.211 +01:00 [INF] Updating status of contribution with Id: "c890d34e-33e0-48f6-9f5c-601691006c94" to Status: "Success"
2025-03-28 11:41:46.300 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-28 11:41:46.301 +01:00 [WRN] Contribution with Id: "c890d34e-33e0-48f6-9f5c-601691006c94" not found
2025-03-28 11:43:36.801 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 11:43:37.969 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 11:43:38.874 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 11:43:39.017 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 11:43:39.018 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 11:43:39.018 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 11:43:39.070 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 11:43:39.071 +01:00 [INF] Hosting environment: Development
2025-03-28 11:43:39.071 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 11:43:39.115 +01:00 [INF] Server desktop-p6lqc67:8216:abcd93ea successfully announced in 28.1095 ms
2025-03-28 11:43:39.126 +01:00 [INF] Server desktop-p6lqc67:8216:abcd93ea is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 11:43:39.436 +01:00 [INF] Server desktop-p6lqc67:8216:abcd93ea all the dispatchers started
2025-03-28 11:43:39.708 +01:00 [INF] HTTP GET /index.html responded 200 in 567.5254 ms
2025-03-28 11:43:39.728 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 871.7194ms
2025-03-28 11:43:39.806 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 11:43:39.817 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 10.8893ms
2025-03-28 11:43:39.819 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 11:43:39.827 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 11:43:39.829 +01:00 [INF] HTTP GET /index.js responded 200 in 2.1070 ms
2025-03-28 11:43:39.836 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 17.3519ms
2025-03-28 11:43:40.248 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 11:43:40.249 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 421.6231ms
2025-03-28 11:43:40.570 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 318.8666 ms
2025-03-28 11:43:40.571 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 322.853ms
2025-03-28 11:43:50.170 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:43:50.230 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:43:50.275 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:43:53.470 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:43:55.408 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000 and Type: "Monthly"
2025-03-28 11:43:55.415 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from database
2025-03-28 11:43:57.705 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 11:43:57.896 +01:00 [INF] Member "3fa85f64-5717-4562-b3fc-2c963f66afa6" cached for subsequent requests.
2025-03-28 11:44:00.851 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:44:00.851 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:44:00.949 +01:00 [INF] Executed DbCommand (75ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:44:00.952 +01:00 [INF] Fetched 0 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:44:04.200 +01:00 [INF] Contribution processed successfully for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000
2025-03-28 11:44:04.201 +01:00 [INF] Invalidating cache for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:12.516 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:12.552 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:45:12.792 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:45:12.809 +01:00 [INF] Successfully added contribution with Id: "cab94161-4e31-4458-8039-a40cb404b8af" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:14.941 +01:00 [INF] Updating status of contribution with Id: "cab94161-4e31-4458-8039-a40cb404b8af" to Status: "Success"
2025-03-28 11:45:14.968 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:45:14.972 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:45:14.973 +01:00 [INF] Contribution added successfully: "cab94161-4e31-4458-8039-a40cb404b8af"
2025-03-28 11:45:14.973 +01:00 [INF] Contribution processed successfully for ID: "cab94161-4e31-4458-8039-a40cb404b8af"
2025-03-28 11:45:14.985 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'EPSPlus.Domain.Entities.Contribution'.
2025-03-28 11:45:15.035 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 84754.9713ms
2025-03-28 11:45:15.036 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:45:15.038 +01:00 [INF] HTTP POST /api/Contribution responded 201 in 84866.6809 ms
2025-03-28 11:45:15.045 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 201 null application/json; charset=utf-8 84875.1931ms
2025-03-28 11:45:23.525 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:45:23.528 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:45:23.529 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:45:28.661 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:45:30.978 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000 and Type: "Monthly"
2025-03-28 11:45:30.978 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afa6" from cache.
2025-03-28 11:45:32.455 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:32.455 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:32.562 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:45:32.567 +01:00 [INF] Fetched 1 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:36.016 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 216
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:45:36.032 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:36.037 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:45:36.045 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:45:36.046 +01:00 [INF] Successfully added contribution with Id: "a7f0dabe-67e3-4f91-8b90-bc5764e2b9b8" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:45:36.046 +01:00 [INF] Updating status of contribution with Id: "a7f0dabe-67e3-4f91-8b90-bc5764e2b9b8" to Status: "Failed"
2025-03-28 11:45:36.054 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:45:36.054 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:45:36.054 +01:00 [INF] Contribution added successfully: "a7f0dabe-67e3-4f91-8b90-bc5764e2b9b8"
2025-03-28 11:45:36.054 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:45:36.055 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:45:36.057 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 12527.6695ms
2025-03-28 11:45:36.057 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:45:36.057 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 12531.7951 ms
2025-03-28 11:45:36.057 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 12532.8642ms
2025-03-28 11:47:31.101 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 153
2025-03-28 11:47:31.102 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:47:31.103 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:47:33.063 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:47:33.070 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000 and Type: "Voluntary"
2025-03-28 11:47:33.071 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afa6" from cache.
2025-03-28 11:47:33.192 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 90000
System.ArgumentException: Voluntary contribution cannot exceed 1000.
   at EPSPlus.Application.Services.ContributionService.HandleVoluntaryContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 229
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 161
2025-03-28 11:47:33.193 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:33.257 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:47:33.265 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:47:33.265 +01:00 [INF] Successfully added contribution with Id: "f75bebdd-7ae4-4fa4-a499-5876be6c16a7" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:33.266 +01:00 [INF] Updating status of contribution with Id: "f75bebdd-7ae4-4fa4-a499-5876be6c16a7" to Status: "Failed"
2025-03-28 11:47:33.270 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:47:33.270 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:47:33.270 +01:00 [INF] Contribution added successfully: "f75bebdd-7ae4-4fa4-a499-5876be6c16a7"
2025-03-28 11:47:33.270 +01:00 [WRN] Contribution processing failed: Voluntary contribution cannot exceed 1000.
2025-03-28 11:47:33.271 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:47:33.271 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 2167.4512ms
2025-03-28 11:47:33.271 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:47:33.271 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 2169.4401 ms
2025-03-28 11:47:33.272 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 2171.0265ms
2025-03-28 11:47:42.555 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 151
2025-03-28 11:47:42.556 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:47:42.556 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:47:45.254 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:47:45.254 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 900 and Type: "Voluntary"
2025-03-28 11:47:45.255 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afa6" from cache.
2025-03-28 11:47:45.764 +01:00 [INF] Contribution processed successfully for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 900
2025-03-28 11:47:45.765 +01:00 [INF] Invalidating cache for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:45.765 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:45.774 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:47:45.784 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:47:45.785 +01:00 [INF] Successfully added contribution with Id: "e380c79c-9d94-45e2-b967-653f7908f417" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:45.786 +01:00 [INF] Updating status of contribution with Id: "e380c79c-9d94-45e2-b967-653f7908f417" to Status: "Success"
2025-03-28 11:47:45.795 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:47:45.795 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:47:45.796 +01:00 [INF] Contribution added successfully: "e380c79c-9d94-45e2-b967-653f7908f417"
2025-03-28 11:47:45.796 +01:00 [INF] Contribution processed successfully for ID: "e380c79c-9d94-45e2-b967-653f7908f417"
2025-03-28 11:47:45.796 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'EPSPlus.Domain.Entities.Contribution'.
2025-03-28 11:47:45.799 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 3242.6299ms
2025-03-28 11:47:45.799 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:47:45.799 +01:00 [INF] HTTP POST /api/Contribution responded 201 in 3243.9724 ms
2025-03-28 11:47:45.800 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 201 null application/json; charset=utf-8 3245.1889ms
2025-03-28 11:47:55.438 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 151
2025-03-28 11:47:55.438 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:47:55.438 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:47:57.493 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:47:57.493 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 900 and Type: "Monthly"
2025-03-28 11:47:57.493 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afa6" from cache.
2025-03-28 11:47:58.626 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:58.626 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:58.633 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:47:58.633 +01:00 [INF] Fetched 2 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:59.147 +01:00 [INF] Contribution processed successfully for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 900
2025-03-28 11:47:59.148 +01:00 [INF] Invalidating cache for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:59.148 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:59.154 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:47:59.162 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:47:59.162 +01:00 [INF] Successfully added contribution with Id: "788f6941-2005-46c5-863e-7e90238380f0" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:47:59.162 +01:00 [INF] Updating status of contribution with Id: "788f6941-2005-46c5-863e-7e90238380f0" to Status: "Success"
2025-03-28 11:47:59.169 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:47:59.169 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:47:59.170 +01:00 [INF] Contribution added successfully: "788f6941-2005-46c5-863e-7e90238380f0"
2025-03-28 11:47:59.170 +01:00 [INF] Contribution processed successfully for ID: "788f6941-2005-46c5-863e-7e90238380f0"
2025-03-28 11:47:59.170 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'EPSPlus.Domain.Entities.Contribution'.
2025-03-28 11:47:59.171 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 3732.8176ms
2025-03-28 11:47:59.172 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:47:59.172 +01:00 [INF] HTTP POST /api/Contribution responded 201 in 3733.7968 ms
2025-03-28 11:47:59.172 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 201 null application/json; charset=utf-8 3734.8969ms
2025-03-28 11:48:06.897 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 151
2025-03-28 11:48:06.898 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:48:06.898 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:48:08.468 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 11:48:08.468 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 900 and Type: "Monthly"
2025-03-28 11:48:08.468 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afa6" from cache.
2025-03-28 11:48:09.483 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:09.485 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:09.503 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 11:48:09.504 +01:00 [INF] Fetched 3 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:09.624 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-b3fc-2c963f66afa6" with Amount: 900
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 216
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 157
2025-03-28 11:48:09.625 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:09.629 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 11:48:09.634 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 11:48:09.634 +01:00 [INF] Successfully added contribution with Id: "3ace3a95-1dbe-4129-a95e-a2a1ed248a46" for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:09.634 +01:00 [INF] Updating status of contribution with Id: "3ace3a95-1dbe-4129-a95e-a2a1ed248a46" to Status: "Failed"
2025-03-28 11:48:09.639 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 11:48:09.640 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 11:48:09.640 +01:00 [INF] Contribution added successfully: "3ace3a95-1dbe-4129-a95e-a2a1ed248a46"
2025-03-28 11:48:09.640 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 11:48:09.640 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:48:09.641 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 2742.5446ms
2025-03-28 11:48:09.641 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 11:48:09.641 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 2743.7494 ms
2025-03-28 11:48:09.642 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 2745.3408ms
2025-03-28 11:48:39.208 +01:00 [INF] 2 servers were removed due to timeout
2025-03-28 11:48:41.512 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/check-eligibility/3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-03-28 11:48:41.514 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.CheckEligibility (EPSPlus.API)'
2025-03-28 11:48:41.523 +01:00 [INF] Route matched with {action = "CheckEligibility", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CheckEligibility(System.Guid) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:48:41.527 +01:00 [INF] Checking eligibility for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:41.528 +01:00 [INF] Checking eligibility for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 11:48:41.528 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:41.528 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:41.529 +01:00 [WRN] Member "3fa85f64-5717-4562-b3fc-2c963f66afa6" is not eligible for benefits.
2025-03-28 11:48:41.530 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 11:48:41.530 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.CheckEligibility (EPSPlus.API) in 6.528ms
2025-03-28 11:48:41.530 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.CheckEligibility (EPSPlus.API)'
2025-03-28 11:48:41.530 +01:00 [INF] HTTP GET /api/Contribution/check-eligibility/3fa85f64-5717-4562-b3fc-2c963f66afa6 responded 400 in 17.3969 ms
2025-03-28 11:48:41.530 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/check-eligibility/3fa85f64-5717-4562-b3fc-2c963f66afa6 - 400 null text/plain; charset=utf-8 18.0379ms
2025-03-28 11:48:58.307 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/total/3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-03-28 11:48:58.309 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API)'
2025-03-28 11:48:58.316 +01:00 [INF] Route matched with {action = "GetTotalContributions", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTotalContributions(System.Guid) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 11:48:58.321 +01:00 [INF] Fetching total contributions for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:58.323 +01:00 [INF] Fetching total contributions from DB for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 11:48:58.323 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:58.323 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 11:48:58.329 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 11:48:58.335 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API) in 18.8292ms
2025-03-28 11:48:58.335 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API)'
2025-03-28 11:48:58.335 +01:00 [INF] HTTP GET /api/Contribution/total/3fa85f64-5717-4562-b3fc-2c963f66afa6 responded 200 in 27.5240 ms
2025-03-28 11:48:58.336 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/total/3fa85f64-5717-4562-b3fc-2c963f66afa6 - 200 null application/json; charset=utf-8 28.5892ms
2025-03-28 11:54:47.363 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 11:54:48.607 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 11:54:49.597 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 11:54:49.652 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 11:54:49.652 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 11:54:49.653 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 11:54:49.703 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 11:54:49.704 +01:00 [INF] Hosting environment: Development
2025-03-28 11:54:49.704 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 11:54:49.751 +01:00 [INF] Server desktop-p6lqc67:34336:dc66e067 successfully announced in 30.3512 ms
2025-03-28 11:54:49.833 +01:00 [INF] Server desktop-p6lqc67:34336:dc66e067 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 11:54:50.102 +01:00 [INF] Server desktop-p6lqc67:34336:dc66e067 all the dispatchers started
2025-03-28 11:54:50.379 +01:00 [INF] HTTP GET /index.html responded 200 in 200.3184 ms
2025-03-28 11:54:50.402 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 817.7899ms
2025-03-28 11:54:50.481 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 11:54:50.481 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 11:54:50.487 +01:00 [INF] HTTP GET /index.js responded 200 in 2.0790 ms
2025-03-28 11:54:50.550 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 11:54:50.550 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 70.0154ms
2025-03-28 11:54:50.560 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 72.7454ms
2025-03-28 11:54:50.646 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 95.5103ms
2025-03-28 11:54:50.750 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 11:54:51.113 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 361.3004 ms
2025-03-28 11:54:51.114 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 364.0554ms
2025-03-28 12:00:10.277 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 12:00:11.722 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 12:00:12.990 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 12:00:13.228 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 12:00:13.229 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 12:00:13.230 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 12:00:13.285 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 12:00:13.285 +01:00 [INF] Hosting environment: Development
2025-03-28 12:00:13.285 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 12:00:13.342 +01:00 [INF] Server desktop-p6lqc67:25096:d3e2047d successfully announced in 34.8841 ms
2025-03-28 12:00:13.358 +01:00 [INF] Server desktop-p6lqc67:25096:d3e2047d is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 12:00:13.468 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 12:00:13.687 +01:00 [INF] Server desktop-p6lqc67:25096:d3e2047d all the dispatchers started
2025-03-28 12:00:13.938 +01:00 [INF] HTTP GET /index.html responded 200 in 611.8613 ms
2025-03-28 12:00:13.973 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 1003.0827ms
2025-03-28 12:00:14.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 12:00:14.217 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 12:00:14.218 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 12:00:14.242 +01:00 [INF] HTTP GET /index.js responded 200 in 23.1929 ms
2025-03-28 12:00:14.295 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 129.4629ms
2025-03-28 12:00:14.308 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 191.7226ms
2025-03-28 12:00:14.465 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 248.2463ms
2025-03-28 12:00:14.576 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 12:00:14.958 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 379.6922 ms
2025-03-28 12:00:14.959 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 383.7731ms
2025-03-28 12:00:15.463 +01:00 [INF] Retrying failed contributions...
2025-03-28 12:00:15.498 +01:00 [INF] Fetching all failed contributions
2025-03-28 12:00:18.676 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[Status] = 3
2025-03-28 12:00:18.960 +01:00 [INF] Fetched 2 failed contributions
2025-03-28 12:00:18.965 +01:00 [INF] Updating contribution with Id: "f75bebdd-7ae4-4fa4-a499-5876be6c16a7"
2025-03-28 12:00:19.367 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 12:00:19.392 +01:00 [INF] Successfully updated contribution with Id: "f75bebdd-7ae4-4fa4-a499-5876be6c16a7"
2025-03-28 12:00:19.393 +01:00 [INF] Retried contribution f75bebdd-7ae4-4fa4-a499-5876be6c16a7 successfully.
2025-03-28 12:00:19.393 +01:00 [INF] Updating contribution with Id: "3ace3a95-1dbe-4129-a95e-a2a1ed248a46"
2025-03-28 12:00:19.405 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 12:00:19.406 +01:00 [INF] Successfully updated contribution with Id: "3ace3a95-1dbe-4129-a95e-a2a1ed248a46"
2025-03-28 12:00:19.406 +01:00 [INF] Retried contribution 3ace3a95-1dbe-4129-a95e-a2a1ed248a46 successfully.
2025-03-28 12:00:19.406 +01:00 [INF] Retry job for failed contributions completed.
2025-03-28 12:01:39.703 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/check-eligibility/3FA85F64-5717-4562-B3FC-2C963F66AFA6 - null null
2025-03-28 12:01:39.774 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.CheckEligibility (EPSPlus.API)'
2025-03-28 12:01:39.806 +01:00 [INF] Route matched with {action = "CheckEligibility", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CheckEligibility(System.Guid) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:01:39.825 +01:00 [INF] Checking eligibility for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:01:51.471 +01:00 [INF] Checking eligibility for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:01:53.851 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:01:53.852 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:01:53.922 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 12:01:53.923 +01:00 [INF] Fetched 4 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:03:37.360 +01:00 [WRN] Member "3fa85f64-5717-4562-b3fc-2c963f66afa6" is not eligible for benefits.
2025-03-28 12:03:37.477 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 12:03:37.486 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.CheckEligibility (EPSPlus.API) in 117674.9367ms
2025-03-28 12:03:37.487 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.CheckEligibility (EPSPlus.API)'
2025-03-28 12:03:37.490 +01:00 [INF] HTTP GET /api/Contribution/check-eligibility/3FA85F64-5717-4562-B3FC-2C963F66AFA6 responded 400 in 117785.4579 ms
2025-03-28 12:03:37.491 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/check-eligibility/3FA85F64-5717-4562-B3FC-2C963F66AFA6 - 400 null text/plain; charset=utf-8 117787.993ms
2025-03-28 12:03:45.926 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/total/3FA85F64-5717-4562-B3FC-2C963F66AFA6 - null null
2025-03-28 12:03:45.933 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API)'
2025-03-28 12:03:45.945 +01:00 [INF] Route matched with {action = "GetTotalContributions", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTotalContributions(System.Guid) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:03:45.955 +01:00 [INF] Fetching total contributions for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:03:51.864 +01:00 [INF] Fetching total contributions from DB for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:03:52.770 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:03:52.770 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:04:17.070 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 12:04:17.087 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API) in 31142.197ms
2025-03-28 12:04:17.088 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API)'
2025-03-28 12:04:17.088 +01:00 [INF] HTTP GET /api/Contribution/total/3FA85F64-5717-4562-B3FC-2C963F66AFA6 responded 200 in 31161.5709 ms
2025-03-28 12:04:17.088 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/total/3FA85F64-5717-4562-B3FC-2C963F66AFA6 - 200 null application/json; charset=utf-8 31162.8725ms
2025-03-28 12:04:51.281 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6?startDate=2025-02-19&endDate=2025-02-29 - null null
2025-03-28 12:04:51.282 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatement (EPSPlus.API)'
2025-03-28 12:04:51.289 +01:00 [INF] Route matched with {action = "GetContributionStatement", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatement(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:04:51.313 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-28 12:04:51.353 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatement (EPSPlus.API) in 63.5096ms
2025-03-28 12:04:51.353 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatement (EPSPlus.API)'
2025-03-28 12:04:51.353 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6 responded 400 in 71.7026 ms
2025-03-28 12:04:51.354 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6?startDate=2025-02-19&endDate=2025-02-29 - 400 null application/problem+json; charset=utf-8 73.2366ms
2025-03-28 12:05:02.256 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6?startDate=2025-02-19&endDate=2025-03-29 - null null
2025-03-28 12:05:02.257 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatement (EPSPlus.API)'
2025-03-28 12:05:02.257 +01:00 [INF] Route matched with {action = "GetContributionStatement", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatement(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:05:02.260 +01:00 [INF] Generating contribution statement for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from "2025-02-19T00:00:00.0000000" to "2025-03-29T00:00:00.0000000"
2025-03-28 12:05:14.540 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:05:14.540 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:05:14.551 +01:00 [INF] 1 servers were removed due to timeout
2025-03-28 12:05:14.559 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from database
2025-03-28 12:05:14.715 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 12:05:14.752 +01:00 [INF] Member "3fa85f64-5717-4562-b3fc-2c963f66afa6" cached for subsequent requests.
2025-03-28 12:05:17.528 +01:00 [INF] Fetching eligibility from cache for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:05:17.531 +01:00 [INF] Executing OkObjectResult, writing value of type 'EPSPlus.Application.DTOs.ContributionStatementDto'.
2025-03-28 12:05:17.560 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatement (EPSPlus.API) in 15302.8455ms
2025-03-28 12:05:17.560 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatement (EPSPlus.API)'
2025-03-28 12:05:17.560 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6 responded 200 in 15303.9109 ms
2025-03-28 12:05:17.561 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6?startDate=2025-02-19&endDate=2025-03-29 - 200 null application/json; charset=utf-8 15304.7922ms
2025-03-28 12:05:53.174 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-29&endDate=2025-03-29 - null null
2025-03-28 12:05:53.176 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:05:53.181 +01:00 [INF] Route matched with {action = "GetContributionStatementPdf", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatementPdf(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:05:53.183 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-28 12:05:53.184 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API) in 2.3583ms
2025-03-28 12:05:53.184 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:05:53.184 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf responded 400 in 9.3385 ms
2025-03-28 12:05:53.184 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-29&endDate=2025-03-29 - 400 null application/problem+json; charset=utf-8 10.6634ms
2025-03-28 12:06:01.553 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-29&endDate=2025-03-19 - null null
2025-03-28 12:06:01.554 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:06:01.554 +01:00 [INF] Route matched with {action = "GetContributionStatementPdf", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatementPdf(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:06:01.556 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-28 12:06:01.557 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API) in 2.5093ms
2025-03-28 12:06:01.557 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:06:01.557 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf responded 400 in 3.3722 ms
2025-03-28 12:06:01.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-29&endDate=2025-03-19 - 400 null application/problem+json; charset=utf-8 4.1767ms
2025-03-28 12:06:08.953 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-19&endDate=2025-03-19 - null null
2025-03-28 12:06:08.954 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:06:08.954 +01:00 [INF] Route matched with {action = "GetContributionStatementPdf", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatementPdf(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:06:08.957 +01:00 [INF] Generating PDF statement for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from "2025-02-19T00:00:00.0000000" to "2025-03-19T00:00:00.0000000"
2025-03-28 12:06:09.247 +01:00 [INF] Generating PDF statement for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 from 19/02/2025 to 19/03/2025
2025-03-28 12:06:09.247 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:06:09.247 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:06:11.873 +01:00 [INF] Found 4 contributions for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:06:11.880 +01:00 [WRN] No contributions found for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 within the date range 19/02/2025 - 19/03/2025.
2025-03-28 12:06:12.026 +01:00 [ERR] Error generating contribution statement PDF for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
System.InvalidOperationException: No contributions found for the given date range.
   at EPSPlus.Application.Services.ContributionService.GenerateStatementPdfAsync(Guid memberId, DateTime startDate, DateTime endDate) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 351
   at EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf(Guid memberId, DateTime startDate, DateTime endDate) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API\Controllers\ContributionController.cs:line 169
2025-03-28 12:06:12.048 +01:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 12:06:12.051 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API) in 3096.831ms
2025-03-28 12:06:12.051 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:06:12.051 +01:00 [ERR] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf responded 500 in 3097.9050 ms
2025-03-28 12:06:12.053 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-19&endDate=2025-03-19 - 500 null application/json; charset=utf-8 3098.972ms
2025-03-28 12:06:24.598 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-19&endDate=2025-03-29 - null null
2025-03-28 12:06:24.598 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:06:24.599 +01:00 [INF] Route matched with {action = "GetContributionStatementPdf", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatementPdf(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:06:24.600 +01:00 [INF] Generating PDF statement for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from "2025-02-19T00:00:00.0000000" to "2025-03-29T00:00:00.0000000"
2025-03-28 12:06:24.600 +01:00 [INF] Generating PDF statement for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 from 19/02/2025 to 29/03/2025
2025-03-28 12:06:24.600 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:06:24.600 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:06:26.394 +01:00 [INF] Found 4 contributions for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:06:26.394 +01:00 [INF] Found 4 contributions within the date range.
2025-03-28 12:06:26.395 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-b3fc-2c963f66afa6" from cache.
2025-03-28 12:06:26.395 +01:00 [INF] Found member details for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6, Name: Onyedika Ezeamama
2025-03-28 12:06:26.397 +01:00 [INF] Total Contributions for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 within the date range: ₦92,700.00
2025-03-28 12:06:27.542 +01:00 [INF] Fetching eligibility from cache for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:06:27.542 +01:00 [INF] Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 Eligibility for benefits: False
2025-03-28 12:06:27.542 +01:00 [INF] Statement DTO created for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:06:31.222 +01:00 [INF] PDF statement generated successfully for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:06:31.224 +01:00 [INF] Executing FileContentResult, sending file with download name 'ContributionStatement.pdf' ...
2025-03-28 12:06:31.231 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API) in 6632.375ms
2025-03-28 12:06:31.231 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:06:31.231 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf responded 200 in 6633.2001 ms
2025-03-28 12:06:31.232 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-02-19&endDate=2025-03-29 - 200 1673 application/pdf 6633.9552ms
2025-03-28 12:09:02.406 +01:00 [INF] Start installing Hangfire SQL objects...
2025-03-28 12:09:03.367 +01:00 [INF] Hangfire SQL objects installed.
2025-03-28 12:09:04.113 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.html - null null
2025-03-28 12:09:04.184 +01:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: (local)@EPSPlusDB'
2025-03-28 12:09:04.185 +01:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2025-03-28 12:09:04.185 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-03-28 12:09:04.271 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-28 12:09:04.272 +01:00 [INF] Hosting environment: Development
2025-03-28 12:09:04.272 +01:00 [INF] Content root path: C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.API
2025-03-28 12:09:04.349 +01:00 [INF] Server desktop-p6lqc67:9996:12bc0ac7 successfully announced in 69.6052 ms
2025-03-28 12:09:04.364 +01:00 [INF] Server desktop-p6lqc67:9996:12bc0ac7 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-03-28 12:09:04.793 +01:00 [INF] Server desktop-p6lqc67:9996:12bc0ac7 all the dispatchers started
2025-03-28 12:09:04.965 +01:00 [INF] HTTP GET /index.html responded 200 in 126.7652 ms
2025-03-28 12:09:04.986 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.html - 200 null text/html;charset=utf-8 887.4673ms
2025-03-28 12:09:05.079 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/index.js - null null
2025-03-28 12:09:05.079 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_vs/browserLink - null null
2025-03-28 12:09:05.079 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - null null
2025-03-28 12:09:05.125 +01:00 [INF] HTTP GET /index.js responded 200 in 42.8734 ms
2025-03-28 12:09:05.132 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/index.js - 200 null application/javascript;charset=utf-8 53.5886ms
2025-03-28 12:09:05.135 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 56.5516ms
2025-03-28 12:09:05.190 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/_vs/browserLink - 200 null text/javascript; charset=UTF-8 112.0468ms
2025-03-28 12:09:05.269 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - null null
2025-03-28 12:09:05.439 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 168.3209 ms
2025-03-28 12:09:05.439 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 170.2931ms
2025-03-28 12:09:43.415 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-03-10&endDate=2025-03-29 - null null
2025-03-28 12:09:43.476 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:09:43.502 +01:00 [INF] Route matched with {action = "GetContributionStatementPdf", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatementPdf(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:09:43.748 +01:00 [INF] Generating PDF statement for Member ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from "2025-03-10T00:00:00.0000000" to "2025-03-29T00:00:00.0000000"
2025-03-28 12:09:47.169 +01:00 [INF] Generating PDF statement for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 from 10/03/2025 to 29/03/2025
2025-03-28 12:09:48.146 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:09:48.147 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:09:49.828 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 12:09:49.959 +01:00 [INF] Fetched 4 contributions from DB for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:09:54.668 +01:00 [INF] Found 4 contributions for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:09:58.554 +01:00 [INF] Found 2 successful contributions within the date range.
2025-03-28 12:09:59.493 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" from database
2025-03-28 12:09:59.561 +01:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 12:09:59.624 +01:00 [INF] Member "3fa85f64-5717-4562-b3fc-2c963f66afa6" cached for subsequent requests.
2025-03-28 12:10:01.589 +01:00 [INF] Found member details for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6, Name: Onyedika Ezeamama
2025-03-28 12:10:11.201 +01:00 [INF] Total Successful Contributions for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 within the date range: ₦1,800.00
2025-03-28 12:10:12.799 +01:00 [INF] Checking eligibility for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:10:12.800 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:10:12.800 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-03-28 12:10:12.804 +01:00 [INF] Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 Eligibility for benefits: False
2025-03-28 12:10:12.805 +01:00 [INF] Statement DTO created for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:10:13.746 +01:00 [INF] PDF statement generated successfully for Member ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6
2025-03-28 12:10:13.754 +01:00 [INF] Executing FileContentResult, sending file with download name 'ContributionStatement.pdf' ...
2025-03-28 12:10:13.765 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API) in 30258.0453ms
2025-03-28 12:10:13.766 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:10:13.767 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf responded 200 in 30351.9624 ms
2025-03-28 12:10:13.778 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-B3FC-2C963F66AFA6/pdf?startDate=2025-03-10&endDate=2025-03-29 - 200 1597 application/pdf 30363.5748ms
2025-03-28 12:13:06.910 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 152
2025-03-28 12:13:06.916 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 12:13:06.930 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:13:09.118 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 12:13:09.124 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 1000 and Type: "Monthly"
2025-03-28 12:13:09.126 +01:00 [INF] Retrieving member by ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from database
2025-03-28 12:13:09.206 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[DateOfBirth], [m].[Email], [m].[FirstName], [m].[IsActive], [m].[LastName], [m].[PhoneNumber], [m].[UpdatedAt]
FROM [Members] AS [m]
WHERE [m].[Id] = @__id_0
2025-03-28 12:13:09.208 +01:00 [INF] Member "3fa85f64-5717-4562-0987-2c963f66afa6" cached for subsequent requests.
2025-03-28 12:13:10.439 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:10.440 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:10.448 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 12:13:10.449 +01:00 [INF] Fetched 0 contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:10.956 +01:00 [INF] Contribution processed successfully for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 1000
2025-03-28 12:13:10.957 +01:00 [INF] Invalidating cache for Member: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:10.960 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:10.998 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 12:13:11.197 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 12:13:11.209 +01:00 [INF] Successfully added contribution with Id: "d793b83e-c3bf-4992-a4e5-335fb0b8b1bb" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:11.210 +01:00 [INF] Updating status of contribution with Id: "d793b83e-c3bf-4992-a4e5-335fb0b8b1bb" to Status: "Success"
2025-03-28 12:13:11.237 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 12:13:11.243 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 12:13:11.244 +01:00 [INF] Contribution added successfully: "d793b83e-c3bf-4992-a4e5-335fb0b8b1bb"
2025-03-28 12:13:11.244 +01:00 [INF] Contribution processed successfully for ID: "d793b83e-c3bf-4992-a4e5-335fb0b8b1bb"
2025-03-28 12:13:11.255 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'EPSPlus.Domain.Entities.Contribution'.
2025-03-28 12:13:11.297 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 4365.7908ms
2025-03-28 12:13:11.297 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 12:13:11.297 +01:00 [INF] HTTP POST /api/Contribution responded 201 in 4385.3860 ms
2025-03-28 12:13:11.298 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 201 null application/json; charset=utf-8 4388.6525ms
2025-03-28 12:13:19.427 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44335/api/Contribution - application/json 152
2025-03-28 12:13:19.428 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 12:13:19.429 +01:00 [INF] Route matched with {action = "AddContribution", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] AddContribution(EPSPlus.Domain.Entities.Contribution) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:13:21.147 +01:00 [INF] Attempting to add a new contribution: EPSPlus.Domain.Entities.Contribution
2025-03-28 12:13:21.148 +01:00 [INF] Processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 1000 and Type: "Monthly"
2025-03-28 12:13:21.148 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-0987-2c963f66afa6" from cache.
2025-03-28 12:13:22.181 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:22.182 +01:00 [INF] Fetching contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:22.266 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__memberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Amount], [c].[ContributionDate], [c].[MemberId], [c].[Status], [c].[Type]
FROM [Contributions] AS [c]
WHERE [c].[MemberId] = @__memberId_0
2025-03-28 12:13:22.266 +01:00 [INF] Fetched 1 contributions from DB for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:22.456 +01:00 [ERR] Error processing contribution for Member: "3fa85f64-5717-4562-0987-2c963f66afa6" with Amount: 1000
System.ArgumentException: Member has already made a monthly contribution this month.
   at EPSPlus.Application.Services.ContributionService.HandleMonthlyContributionAsync(Contribution contribution, Member member) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 225
   at EPSPlus.Application.Services.ContributionService.ProcessContributionAsync(Contribution contribution) in C:\Users\onyedika.ezeamama\Desktop\project\EPSPlus\EPSPlus.Application\Services\ContributionService.cs:line 166
2025-03-28 12:13:22.465 +01:00 [INF] Attempting to add contribution for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:22.468 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__contribution_MemberId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Members] AS [m]
        WHERE [m].[Id] = @__contribution_MemberId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-28 12:13:22.473 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Contributions] ([Id], [Amount], [ContributionDate], [MemberId], [Status], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-28 12:13:22.474 +01:00 [INF] Successfully added contribution with Id: "f72a4e9f-4788-4bf5-b978-c419774869e0" for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:22.474 +01:00 [INF] Updating status of contribution with Id: "f72a4e9f-4788-4bf5-b978-c419774869e0" to Status: "Failed"
2025-03-28 12:13:22.483 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p5='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Guid), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Contributions] SET [Amount] = @p0, [ContributionDate] = @p1, [MemberId] = @p2, [Status] = @p3, [Type] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-03-28 12:13:22.484 +01:00 [INF] Successfully updated status of contribution with Id: {ContributionId} to Status: {Status}
2025-03-28 12:13:22.484 +01:00 [INF] Contribution added successfully: "f72a4e9f-4788-4bf5-b978-c419774869e0"
2025-03-28 12:13:22.484 +01:00 [WRN] Contribution processing failed: Member has already made a monthly contribution this month.
2025-03-28 12:13:22.485 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-28 12:13:22.486 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API) in 3056.9844ms
2025-03-28 12:13:22.486 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.AddContribution (EPSPlus.API)'
2025-03-28 12:13:22.486 +01:00 [INF] HTTP POST /api/Contribution responded 400 in 3058.2765 ms
2025-03-28 12:13:22.486 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44335/api/Contribution - 400 null text/plain; charset=utf-8 3059.699ms
2025-03-28 12:13:41.203 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/total/3FA85F64-5717-4562-0987-2C963F66AFA6 - null null
2025-03-28 12:13:41.206 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API)'
2025-03-28 12:13:41.214 +01:00 [INF] Route matched with {action = "GetTotalContributions", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTotalContributions(System.Guid) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:13:41.219 +01:00 [INF] Fetching total contributions for Member ID: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:43.273 +01:00 [INF] Fetching total contributions from DB for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6
2025-03-28 12:13:43.273 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:43.274 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:43.281 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.Decimal, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-28 12:13:43.289 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API) in 2074.5921ms
2025-03-28 12:13:43.290 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetTotalContributions (EPSPlus.API)'
2025-03-28 12:13:43.290 +01:00 [INF] HTTP GET /api/Contribution/total/3FA85F64-5717-4562-0987-2C963F66AFA6 responded 200 in 2086.1074 ms
2025-03-28 12:13:43.291 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/total/3FA85F64-5717-4562-0987-2C963F66AFA6 - 200 null application/json; charset=utf-8 2087.1904ms
2025-03-28 12:13:55.828 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-0987-2C963F66AFA6/pdf?startDate=2025-03-10&endDate=2025-03-29 - null null
2025-03-28 12:13:55.829 +01:00 [INF] Executing endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:13:55.830 +01:00 [INF] Route matched with {action = "GetContributionStatementPdf", controller = "Contribution"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContributionStatementPdf(System.Guid, System.DateTime, System.DateTime) on controller EPSPlus.API.Controllers.ContributionController (EPSPlus.API).
2025-03-28 12:13:55.834 +01:00 [INF] Generating PDF statement for Member ID: "3fa85f64-5717-4562-0987-2c963f66afa6" from "2025-03-10T00:00:00.0000000" to "2025-03-29T00:00:00.0000000"
2025-03-28 12:13:57.691 +01:00 [INF] Generating PDF statement for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6 from 10/03/2025 to 29/03/2025
2025-03-28 12:13:57.691 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:57.691 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:57.691 +01:00 [INF] Found 1 contributions for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6
2025-03-28 12:13:57.692 +01:00 [INF] Found 1 successful contributions within the date range.
2025-03-28 12:13:57.692 +01:00 [INF] Retrieved member "3fa85f64-5717-4562-0987-2c963f66afa6" from cache.
2025-03-28 12:13:57.692 +01:00 [INF] Found member details for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6, Name: Stephen Ezeamama
2025-03-28 12:13:57.692 +01:00 [INF] Total Successful Contributions for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6 within the date range: ₦1,000.00
2025-03-28 12:13:58.730 +01:00 [INF] Checking eligibility for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6
2025-03-28 12:13:58.731 +01:00 [INF] Checking cache for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:58.731 +01:00 [INF] Returning cached contributions for MemberId: "3fa85f64-5717-4562-0987-2c963f66afa6"
2025-03-28 12:13:58.731 +01:00 [INF] Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6 Eligibility for benefits: False
2025-03-28 12:13:58.731 +01:00 [INF] Statement DTO created for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6
2025-03-28 12:13:58.777 +01:00 [INF] PDF statement generated successfully for Member ID: 3fa85f64-5717-4562-0987-2c963f66afa6
2025-03-28 12:13:58.778 +01:00 [INF] Executing FileContentResult, sending file with download name 'ContributionStatement.pdf' ...
2025-03-28 12:13:58.779 +01:00 [INF] Executed action EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API) in 2948.7477ms
2025-03-28 12:13:58.780 +01:00 [INF] Executed endpoint 'EPSPlus.API.Controllers.ContributionController.GetContributionStatementPdf (EPSPlus.API)'
2025-03-28 12:13:58.780 +01:00 [INF] HTTP GET /api/Contribution/statement/3FA85F64-5717-4562-0987-2C963F66AFA6/pdf responded 200 in 2950.6050 ms
2025-03-28 12:13:58.780 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44335/api/Contribution/statement/3FA85F64-5717-4562-0987-2C963F66AFA6/pdf?startDate=2025-03-10&endDate=2025-03-29 - 200 1545 application/pdf 2952.2033ms
2025-03-28 12:14:04.540 +01:00 [INF] 1 servers were removed due to timeout
